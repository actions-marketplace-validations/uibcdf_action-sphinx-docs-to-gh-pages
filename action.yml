name: 'Sphinx docs to GitHub Pages'
description: 'Automatic Sphinx html docs compilation and deployment through the gh-pages branch.'
author: "Diego Prada"
branding:
  icon: "upload-cloud"
  color: "orange"
runs:
  using: "composite"
  steps:
    - name: setting the committer name and email
      id: committer
      run: bash $GITHUB_ACTION_PATH/set_committer.sh
      shell: bash
    - name: gh-pages branch creation if needed
      id: gh-pages-branch-creation
      run: bash $GITHUB_ACTION_PATH/gh-pages_branch.sh
      shell: bash
    - name: sphinx html docs compilation
      working-directory: ./docs
      run: bash $GITHUB_ACTION_PATH/sphinx.sh
      shell: bash
    - name: pushing to gh-pages
      working-directory: ./docs
      run: bash $GITHUB_ACTION_PATH/to_gh-pages.sh
      shell: bash

